# MythosMUD Production Environment Configuration

# --- Server Configuration ---
DEBUG=false
LOG_LEVEL=WARNING
ENVIRONMENT=production

# --- Database Configuration ---
DATABASE_URL=postgresql://mythos_user:secure_password@localhost:5432/mythos_prod
# For SQLite: DATABASE_URL=sqlite:///./data/players/mythos.db

# --- Security Configuration ---
SECRET_KEY=your-production-secret-key-here
CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
RATE_LIMIT_REQUESTS=50
RATE_LIMIT_WINDOW=60

# --- Security Headers Configuration ---
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true
CSP_POLICY=default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'
REFERRER_POLICY=strict-origin-when-cross-origin

# --- CORS Configuration ---
ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With

# --- Dual Connection System Configuration ---
MAX_CONNECTIONS_PER_PLAYER=2
CONNECTION_TIMEOUT=180
HEALTH_CHECK_INTERVAL=15
CLEANUP_INTERVAL=30
MESSAGE_BATCH_SIZE=100
CONNECTION_POOL_SIZE=1000
PERFORMANCE_MONITORING=true

# --- WebSocket Configuration ---
WEBSOCKET_PING_INTERVAL=30
WEBSOCKET_PING_TIMEOUT=10
WEBSOCKET_MAX_MESSAGE_SIZE=1048576

# --- SSE Configuration ---
SSE_RETRY_TIMEOUT=3000
SSE_MAX_CONNECTIONS=500

# --- Session Management ---
SESSION_TIMEOUT=3600
SESSION_CLEANUP_INTERVAL=300
MAX_SESSIONS_PER_PLAYER=5

# --- Error Handling ---
MAX_RETRY_ATTEMPTS=3
RETRY_DELAY=5
ERROR_RECOVERY_ENABLED=true

# --- Monitoring Configuration ---
ENABLE_METRICS=true
METRICS_PORT=9090
LOG_FORMAT=json
METRICS_INTERVAL=30
HEALTH_CHECK_INTERVAL=15
PERFORMANCE_TRACKING=true

# --- Game Data Directories ---
ALIASES_DIR=data/players/aliases

# --- External Services ---
SENTRY_DSN=your-sentry-dsn-here
PROMETHEUS_ENDPOINT=http://localhost:9090/metrics

# --- Load Balancing ---
SERVER_ID=1
CLUSTER_MODE=false
STICKY_SESSIONS=true

# --- Performance Tuning ---
WORKERS=4
MAX_REQUESTS=1000
MAX_REQUESTS_JITTER=100
TIMEOUT_KEEP_ALIVE=5
TIMEOUT_GRACEFUL_SHUTDOWN=30

# --- SSL/TLS Configuration ---
SSL_CERT_PATH=/etc/ssl/certs/mythos.crt
SSL_KEY_PATH=/etc/ssl/private/mythos.key
SSL_VERIFY_CLIENT=false

# --- Backup Configuration ---
BACKUP_ENABLED=true
BACKUP_INTERVAL=3600
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=/backups/mythos

# --- Logging Configuration ---
LOG_ROTATION_MAX_SIZE=100MB
LOG_ROTATION_BACKUP_COUNT=10
LOG_COMPRESSION=true
LOG_LEVEL_FILE=INFO
LOG_LEVEL_CONSOLE=WARNING

# --- Cache Configuration ---
REDIS_URL=redis://localhost:6379/0
CACHE_TTL=3600
CACHE_MAX_SIZE=1000

# --- Rate Limiting ---
RATE_LIMIT_ENABLED=true
RATE_LIMIT_STORAGE=redis
RATE_LIMIT_STRATEGY=sliding_window

# --- Health Check Configuration ---
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_RETRIES=3

# --- Metrics and Alerting ---
PROMETHEUS_ENABLED=true
GRAFANA_ENABLED=true
ALERTMANAGER_ENABLED=true
SLACK_WEBHOOK_URL=your-slack-webhook-url
EMAIL_ALERTS_ENABLED=true
EMAIL_SMTP_HOST=smtp.gmail.com
EMAIL_SMTP_PORT=587
EMAIL_SMTP_USER=alerts@yourdomain.com
EMAIL_SMTP_PASSWORD=your-email-password

# --- Feature Flags ---
ENABLE_DUAL_CONNECTIONS=true
ENABLE_SESSION_MANAGEMENT=true
ENABLE_PERFORMANCE_MONITORING=true
ENABLE_ERROR_RECOVERY=true
ENABLE_CONNECTION_HEALTH_CHECKS=true
ENABLE_MESSAGE_BATCHING=true
ENABLE_CONNECTION_POOLING=true

# --- Development/Testing Flags (should be false in production) ---
ENABLE_DEBUG_ENDPOINTS=false
ENABLE_TEST_DATA=false
ENABLE_MOCK_SERVICES=false
ENABLE_DEVELOPMENT_TOOLS=false
